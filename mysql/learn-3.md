# learn-3

## 1.笛卡尔查询

笛卡尔查询可以让我们做到从多张表同时查询数据，其语法如下：

```sql
SELECT * FROM <表1> <表2>;
```

这种一次查询两个表数据的 sql 会得到一个二维表，以 `SELECT * FROM students, classes;` 为例，结果将会是 `students`表和`classes`表的“乘积”，即`students`表的每一行与`classes`表的每一行都两两拼在一起返回。结果集的列数是`students`表和`classes`表的列数之和，行数是`students`表和`classes`表的行数之积。

使用笛卡尔查询时要非常小心，由于结果集是目标表的行数乘积，对两个各自有100行记录的表进行笛卡尔查询将返回1万条记录，对两个各自有1万行记录的表进行笛卡尔查询将返回1亿条记录。

此外，笛卡尔查询还会造成结果集中有相同的字段名称，要解决这个问题，我们可以利用 AS 关键词来给字段设置别名。

> 注意，多表查询时，要使用 `表名.列名` 这样的方式来引用列和设置别名，这样就避免了结果集的列名重复问题。但是，用 `表名.列名` 这种方式列举两个表的所有列实在是很麻烦，所以SQL还允许给表设置一个别名，让我们在投影查询中引用起来稍微简洁一点。
>
> ```sql
> SELECT
>     s.id AS sid,
>     s.name,
>     s.gender,
>     s.score,
>     c.id AS cid,
>     c.name AS cname
> FROM students AS s, classes AS c
> WHERE s.gender = 'M' AND c.id = 1;
> ```

笛卡尔查询的主要缺点是**它会产生大量的数据**，而且很少有实际应用场景需要返回这么多的数据。这会导致查询速度变慢，增加网络传输和存储成本。另一个缺点是**笛卡尔积查询可能会错误地组合行，因为没有指定连接条件**。例如，如果表 A 包含城市和州的数据，表 B 包含城市和国家的数据，那么在没有连接条件的情况下，笛卡尔积查询将返回所有可能的行组合，包括一些不正确的行。

在实际应用中，**应该尽可能避免使用笛卡尔积查询，而是使用连接操作**（如 inner join、left join、right join 或 outer join）来将表中的数据组合在一起，以获得更准确和有意义的结果。

## 2.连接查询

连接查询是另一种类型的多表查询。连接查询对多个表进行JOIN运算，简单地说，就是先确定一个主表作为结果集，然后，把其他表的行有选择性地“连接”在主表结果集上。

例如，我们想要选出`students`表的所有学生信息，但是又希望结果集同时包含所在班级的名称。已知存放班级名称的`name`列存储在`classes`表中，那么只有根据`students`表的`class_id`，找到`classes`表对应的行，再取出`name`列，就可以获得班级名称。

这时我们可以采用 INNER JOIN——内连接实现这一目的：

```sql
SELECT s.id, s.name, s.class_id, c.name class_name, s.gender, s.score
FROM students s
INNER JOIN classes c
ON s.class_id = c.id;
```



















